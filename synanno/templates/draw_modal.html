<!-- Instance-specific view that opens up when right-clicking one of the tiles of the annotation view.
    It shows an enlarged version of the instance. Additionally, it lets the user move a lever,
    located at the bottom of the newly opened window, which scrolls through all the slices
    of the selected instance and their associated segmentation masks.
    Both views load the requested images as png files from a corresponding folder structure. -->

<!-- Modernized Modal -->
<div class="modal fade" id="drawModal" tabindex="-1" aria-labelledby="drawModalLabel" aria-hidden="true" data-viewed-instance-slice="0">
  <div class="modal-dialog modal-dialog-centered modal">
    <div class="modal-content shadow rounded-4 border-0">

      <!-- Header with Title -->
      <div class="modal-header border-0 pb-0">
        <h5 class="modal-title mx-auto" id="drawModalLabel">Instance Viewer</h5>
        <button type="button" class="btn-close position-absolute end-0 me-3" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <!-- Body -->
      <div class="modal-body p-4">

        <!-- Canvas Display -->
        <div class="d-flex justify-content-center mb-4">
          <div id="cardDetails" class="card border-0 bg-light rounded-3 shadow-sm">
            <div class="outsideWrapper border rounded-4 overflow-hidden">
              <div class="insideWrapper">
                <img id="imgDetails-EM" class="coveredImage" src="" />
                <img id="imgDetails-EM-GT-curve" class="coveredImage d-none" style="opacity: 0.5" src="" />
                <img id="imgDetails-EM-GT-circlePre" class="coveredImage d-none" style="opacity: 0.5" src="" />
                <img id="imgDetails-EM-GT-circlePost" class="coveredImage d-none" style="opacity: 0.5" src="" />
                <canvas class="curveCanvas d-none"></canvas>
                <canvas class="circleCanvasPre d-none"></canvas>
                <canvas class="circleCanvasPost d-none"></canvas>
              </div>
            </div>
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="text-center">
          <div class="btn-group flex-wrap gap-1" role="group" aria-label="Canvas Actions">
            <button type="button" class="btn btn-secondary" id="canvasButtonPreCRD" title="Pre-Synaptic Marker">ðŸŸ¢</button>
            <button type="button" class="btn btn-secondary" id="canvasButtonPostCRD" title="Post-Synaptic Marker">ðŸ”µ</button>
            <button type="button" class="btn btn-secondary" id="canvasButtonDrawMask" title="Draw Mask">
              <i class="bi bi-pencil"></i>
            </button>
            <button type="button" class="btn btn-secondary" id="canvasButtonFill" title="Fill">
              <i class="bi bi-paint-bucket"></i>
            </button>
            <button type="button" class="btn btn-secondary" id="canvasButtonRevise" title="Revise">
              <i class="bi bi-eraser"></i>
            </button>
            <button type="button" class="btn btn-success" id="canvasButtonSave" title="Save">
              <i class="bi bi-save"></i>
            </button>
            <button type="button" class="btn btn-warning" id="canvasButtonAuto" title="Auto Fill">
              <i class="bi bi-magic"></i>
            </button>
            <button class="btn btn-secondary" id="ng-link-draw" type="button" data-bs-target="#drawModalFN" data-bs-toggle="modal" data-bs-dismiss="modal" title="View in Neuroglancer">
              <i class="bi bi-diagram-3"></i>
            </button>
          </div>
        </div>

      </div>
    </div>
  </div>
</div>
